# 线程池
<!-- toc -->

## 前言
线程池是并发中一项常用的优化方法，通过将线程保存起来，减少线程的创建，降低资源消耗，提高程序响应速度。下面我们深入的分析一下 Java 线程池的实现。

## 基本使用
我们首先看下线程池的基本使用。在下面的代码中我们创建一个固定大小的线程池，该线程池中最多包含 5 个线程，当任务数量超过线程的数量时，就将任务添加到任务队列，等线程空闲之后再从任务队列中获取数据。
```java
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

/**
 * Created by Jikai Zhang on 2017/4/17.
 */
public class ThreadPoolDemo {

    static class WorkThread implements Runnable {
        private String command;

        public WorkThread(String command) {
            this.command = command;
        }

        @Override
        public void run() {
            System.out.println("Thread-" + Thread.currentThread().getId() + " start. Command=" + command);
            processCommand();
            System.out.println("Thread-" + Thread.currentThread().getId() + " end.");
        }

        private void processCommand() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        ExecutorService executor = Executors.newFixedThreadPool(5);
        for (int i = 0; i < 10; i++) {

            Runnable work = new WorkThread("" + i);
            executor.execute(work);
        }
        executor.shutdown();
        while (!executor.isTerminated()) {
        }
        System.out.println("Finish all threads.");
    }
}
```
## ThreadPoolExecutor


ThreadPoolExecutor 是线程池的具体实现类，我们从源码分析下该类的实现。


## 参考文章
* [Java线程池架构(一)原理和源码解析](http://ifeve.com/java-threadpoolexecutor/)
* [Java线程池--原理及源码分析](http://www.jianshu.com/p/117571856b28)
* [http://blog.csdn.net/qq_35101189/article/details/55804778](http://blog.csdn.net/qq_35101189/article/details/55804778)
* [http://zhanjindong.com/2015/03/30/java-concurrent-package-ThreadPoolExecutor](http://zhanjindong.com/2015/03/30/java-concurrent-package-ThreadPoolExecutor)
